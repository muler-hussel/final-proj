2025-07-17 00:12:56,843 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-61' coro=<RedisService._history_to_mongodb() done, defined at D:\finalPro\backend\app\services\redis_service.py:236> exception=1 validation error for History
  JSON input should be string, bytes or bytearray [type=json_type, input_value=History(role='user', mess...tions=[], itinerary=[])), input_type=History]
    For further information visit https://errors.pydantic.dev/2.11/v/json_type>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\redis_service.py", line 243, in _history_to_mongodb
    history_list = [History.model_validate_json(entry_json) for entry_json in history]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\pydantic\main.py", line 746, in model_validate_json
    return cls.__pydantic_validator__.validate_json(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for History
  JSON input should be string, bytes or bytearray [type=json_type, input_value=History(role='user', mess...tions=[], itinerary=[])), input_type=History]
    For further information visit https://errors.pydantic.dev/2.11/v/json_type
2025-07-17 00:12:57,972 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:12:57,972 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-94' coro=<RedisService._history_to_mongodb() done, defined at D:\finalPro\backend\app\services\redis_service.py:236> exception=1 validation error for History
  JSON input should be string, bytes or bytearray [type=json_type, input_value=History(role='user', mess...tions=[], itinerary=[])), input_type=History]
    For further information visit https://errors.pydantic.dev/2.11/v/json_type>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\redis_service.py", line 243, in _history_to_mongodb
    history_list = [History.model_validate_json(entry_json) for entry_json in history]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\pydantic\main.py", line 746, in model_validate_json
    return cls.__pydantic_validator__.validate_json(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for History
  JSON input should be string, bytes or bytearray [type=json_type, input_value=History(role='user', mess...tions=[], itinerary=[])), input_type=History]
    For further information visit https://errors.pydantic.dev/2.11/v/json_type
2025-07-17 00:15:16,426 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:17:49,731 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:19:06,330 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:20:40,017 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:30:01,114 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:32:10,493 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:33:40,010 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:36:01,223 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:38:43,772 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:40:02,986 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:40:39,301 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:40:45,293 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-266' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:40:45,295 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-267' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:40:45,835 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-274' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:40:45,836 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-275' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:40:46,365 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-282' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:40:47,099 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-289' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 296, in enrich_place_detail
    if await redis_service.get(lock_key):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\finalPro\backend\app\services\redis_service.py", line 219, in get
    return await self._redis_client.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object NoneType can't be used in 'await' expression
2025-07-17 00:42:55,734 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:42:59,312 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 00:43:05,449 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-259' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("'coroutine' object is not subscriptable")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 316, in enrich_place_detail
    place.info.pros = enrich_data['pros']
                      ~~~~~~~~~~~^^^^^^^^
TypeError: 'coroutine' object is not subscriptable
2025-07-17 00:43:06,018 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-268' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("'coroutine' object is not subscriptable")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 316, in enrich_place_detail
    place.info.pros = enrich_data['pros']
                      ~~~~~~~~~~~^^^^^^^^
TypeError: 'coroutine' object is not subscriptable
2025-07-17 00:43:06,019 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-269' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=AttributeError("'NoneType' object has no attribute 'type'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 306, in enrich_place_detail
    if (place.type == "city") and (len(place.sub_items) == 0):
        ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'type'
2025-07-17 00:43:06,777 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-280' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("'coroutine' object is not iterable")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 308, in enrich_place_detail
    popular_places: List[PlaceCard] = [PlaceCard(**item) for item in raw_data]
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-07-17 00:43:07,280 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-289' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("'coroutine' object is not iterable")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 308, in enrich_place_detail
    popular_places: List[PlaceCard] = [PlaceCard(**item) for item in raw_data]
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not iterable
2025-07-17 00:43:07,510 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-298' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:293> exception=TypeError("'coroutine' object is not subscriptable")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 316, in enrich_place_detail
    place.info.pros = enrich_data['pros']
                      ~~~~~~~~~~~^^^^^^^^
TypeError: 'coroutine' object is not subscriptable
2025-07-17 02:38:36,582 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:38:40,106 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:38:48,922 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-416' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'dict' object has no attribute 'pros'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 315, in enrich_place_detail
    place.info.pros = enrich_data.pros
                      ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'pros'
2025-07-17 02:38:49,831 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-496' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'dict' object has no attribute 'pros'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 315, in enrich_place_detail
    place.info.pros = enrich_data.pros
                      ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'pros'
2025-07-17 02:38:49,942 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-430' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'dict' object has no attribute 'pros'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 315, in enrich_place_detail
    place.info.pros = enrich_data.pros
                      ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'pros'
2025-07-17 02:38:51,058 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-452' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'dict' object has no attribute 'pros'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 315, in enrich_place_detail
    place.info.pros = enrich_data.pros
                      ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'pros'
2025-07-17 02:38:51,153 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-466' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'coroutine' object has no attribute 'name'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 310, in enrich_place_detail
    place.sub_items.append(PlaceCard(place_info.name, p.description, p.recommend_reason))
                                     ^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'name'
2025-07-17 02:38:54,271 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-480' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'coroutine' object has no attribute 'name'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 310, in enrich_place_detail
    place.sub_items.append(PlaceCard(place_info.name, p.description, p.recommend_reason))
                                     ^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'name'
2025-07-17 02:39:08,767 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:39:09,662 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:39:11,083 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:39:11,715 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:39:14,942 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:41:21,928 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:42:11,389 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:42:58,835 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:46:25,942 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:46:59,857 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:48:23,034 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:50:32,896 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:51:25,568 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:54:28,830 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:55:31,526 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:56:49,891 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:57:21,757 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:58:40,417 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:59:10,609 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 02:59:47,273 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:00:43,685 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:00:48,989 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:02:21,541 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:11:37,876 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:13:22,573 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:17:18,616 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:26:06,348 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:26:09,244 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:27:11,662 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:27:14,152 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:27:49,818 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:27:54,891 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:27:59,760 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-210' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'NoneType' object has no attribute 'type'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 305, in enrich_place_detail
    if (place.type == "city") and (len(place.sub_items) == 0):
        ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'type'
2025-07-17 03:28:00,295 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-241' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'NoneType' object has no attribute 'type'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 305, in enrich_place_detail
    if (place.type == "city") and (len(place.sub_items) == 0):
        ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'type'
2025-07-17 03:28:00,302 - [ERROR] - asyncio - b0cae2bb53eec33478a626d9b1025414def2a991 - Task exception was never retrieved
future: <Task finished name='Task-242' coro=<RecommendService.enrich_place_detail() done, defined at D:\finalPro\backend\app\services\recommend_service.py:292> exception=AttributeError("'NoneType' object has no attribute 'type'")>
Traceback (most recent call last):
  File "D:\finalPro\backend\app\services\recommend_service.py", line 305, in enrich_place_detail
    if (place.type == "city") and (len(place.sub_items) == 0):
        ^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'type'
2025-07-17 03:28:38,035 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:28:42,078 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:28:53,904 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:28:58,612 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:29:02,006 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:29:09,809 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:30:30,532 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:30:32,374 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:31:01,469 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:31:45,075 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:32:03,346 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 03:34:09,102 - [INFO] - googlemaps.client - b0cae2bb53eec33478a626d9b1025414def2a991 - API queries_quota: 60
2025-07-17 06:11:09,825 - [ERROR] - asyncio - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - Task exception was never retrieved
future: <Task finished name='Task-36' coro=<RedisExpiredListener.listen() done, defined at D:\finalPro\backend\app\utils\async_listener.py:7> exception=ConnectionError('Error UNKNOWN while writing to socket. Connection lost.')>
Traceback (most recent call last):
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 530, in send_packed_command
    await self._writer.drain()
  File "D:\Program Files (x86)\Python\Python312\Lib\asyncio\streams.py", line 392, in drain
    await self._protocol._drain_helper()
  File "D:\Program Files (x86)\Python\Python312\Lib\asyncio\streams.py", line 166, in _drain_helper
    raise ConnectionResetError('Connection lost')
ConnectionResetError: Connection lost

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\finalPro\backend\app\utils\async_listener.py", line 10, in listen
    await pubsub.subscribe("__keyevent@0__:expired")
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\client.py", line 1071, in subscribe
    ret_val = await self.execute_command("SUBSCRIBE", *new_channels.keys())
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\client.py", line 924, in execute_command
    await self.connect()
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\client.py", line 934, in connect
    self.connection = await self.connection_pool.get_connection()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 1141, in get_connection
    await self.ensure_connection(connection)
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 1174, in ensure_connection
    await connection.connect()
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 296, in connect
    await self.connect_check_health(check_health=True)
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 317, in connect_check_health
    await self.on_connect_check_health(check_health=check_health)
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 436, in on_connect_check_health
    await self.send_command(
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 554, in send_command
    await self.send_packed_command(
  File "D:\Program Files (x86)\Python\Python312\Lib\site-packages\redis\asyncio\connection.py", line 541, in send_packed_command
    raise ConnectionError(
redis.exceptions.ConnectionError: Error UNKNOWN while writing to socket. Connection lost.
2025-07-17 06:29:08,787 - [INFO] - googlemaps.client - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - API queries_quota: 60
2025-07-17 06:30:22,430 - [INFO] - googlemaps.client - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - API queries_quota: 60
2025-07-17 06:30:24,114 - [INFO] - googlemaps.client - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - API queries_quota: 60
2025-07-17 06:30:27,353 - [INFO] - googlemaps.client - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - API queries_quota: 60
2025-07-17 06:30:30,600 - [INFO] - googlemaps.client - 474c571be813c6dbd332b86860ab3ecc9ea0f6a4 - API queries_quota: 60
